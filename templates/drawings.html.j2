{% extends "layout.html.j2"%}
{%block TITLE%}
 	{{img[-1]}} {{super()}}
{%endblock%}
{%block MAIN%}
<!-- JS Script by bluimp to orientate images-->
    <script src="{{staticPATH}}js/JavaScript-Load-Image/js/load-image.all.min.js"></script>
    <div id="modal100" class="hidden"></div>
    <div class="wrap-photos">
        <header>{{img[-1]}}</header>
        <div id="TheImage"></div>
        <div class="photo-main">
            <div class="photo-slider">
                {% for url,title in photos %}
                    <div>
                        <a class="photo-image" href="/drawings/{{url}}#TheImage">
                            <img src="{{staticPATH+THUMBNAILS+url}}" title="{{title}}" alt="{{title or 'Neighbouring Images'}}">
                        </a>
                    </div>
                {% endfor %}
            </div>
            <div class="photo-info">
                <header>{{img[-1]}}</header>
                <div class="photo-desc hidden">
                    {{img.1}}
                </div>
                <div class="photo-meta hidden">
                    <b>Date of creation:</b> {{img.2 or "Not known"}}<br>
                    <b>Upload date:</b> {{img.3 or "Not known"}}<br>
                    <b>License:</b> {{img.4 or "Not known"}}
                </div>
            </div>
        </div>
    </div>
    <script>
        // loads image into canvases
        // then orientates them
        // loadImage is bluimp's function
        loadImage(
            '{{staticPATH[:-1]+img.0}}',
            function(imgElem){
                $(imgElem).css('max-width', '100%');
                $(imgElem).css('max-height', '100%');
                CLONEimgElem = imgElem.cloneNode();
                CLONEimgElem.getContext('2d').drawImage(imgElem,0,0);
                $('#modal100').html(imgElem);
                $('#TheImage').html(CLONEimgElem);
                $('.photo-desc, .photo-meta').removeClass('hidden');
                CLONEimgElem.title = "Click to change the View"
                imgElem.title = "Click to change the View"
            },
            {orientation: true}
        )

    </script>
    <script>
        // toggles between display or hide modal
        $('#TheImage').click(function(){
            $('#modal100').removeClass('hidden');
        })
        $('#modal100').click(function(){
            $('#modal100').addClass('hidden');
        })
    </script>
    <script>
        // adding .overflowed class to element
        var /*global variable for toggleOverflow*/
            photoSlider = $('.photo-slider')
        ;

        $(toggleOverflow.bind(window, photoSlider)); //on ready
        $(window).resize(toggleOverflow.bind(window, photoSlider)); //on resize
    </script>
{%endblock%}
